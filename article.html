<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>æ–‡ç« è©³æƒ… Â· æµèŠ¯è¦–è¦º</title>

  <script src="https://cdn.jsdelivr.net/npm/@contentful/rich-text-html-renderer@16/dist/rich-text-html-renderer.min.js"></script>
  <script>
    // ç¢ºä¿å…¨åŸŸå¯ç”¨ï¼ˆä¸åŒç‰ˆæœ¬å¯èƒ½æ›åœ¨ window.contentfulRichTextHtmlRendererï¼‰
    if (typeof window.documentToHtmlString !== 'function' &&
        window.contentfulRichTextHtmlRenderer &&
        typeof window.contentfulRichTextHtmlRenderer.documentToHtmlString === 'function') {
      window.documentToHtmlString = window.contentfulRichTextHtmlRenderer.documentToHtmlString;
    }
  </script>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-4M94YE8ETT"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-4M94YE8ETT');
</script>

  <meta name="description" content="æµèŠ¯è¦–è¦º LYQD media æ–‡ç« è©³æƒ…é é¢">
  <meta name="keywords" content="æµèŠ¯è¦–è¦º,LYQD media,æ–‡ç« ,AI å½±åƒ,æ•¸ä½è¡ŒéŠ·,è¦–è¦ºè¨­è¨ˆ">
  
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Contentful Rich Text Renderer + Proxy helpers -->
  <script src="https://cdn.jsdelivr.net/npm/@contentful/rich-text-html-renderer@16/dist/rich-text-html-renderer.min.js"></script>
  <script>
    // é€éè‡ªå®¶ proxy å‘¼å« Contentfulï¼Œé¿å…å‰ç«¯æš´éœ²é‡‘é‘°
    function contentfulProxyUrl(params) {
      const search = new URLSearchParams(params).toString();
      return `/api/contentful?path=/entries&${search}`;
    }

    // å¾ URL åƒæ•¸ç²å–æ–‡ç«  ID
    function getArticleId() {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get('id');
    }

    // ç²å–æ–‡ç« å…§å®¹
    async function fetchArticle(articleId) {
      try {
        const apiUrl = contentfulProxyUrl({ 'sys.id': articleId, include: '2' });
        const response = await fetch(apiUrl);
        if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
        const data = await response.json();
        return { article: data.items?.[0] || null, includes: data.includes || {} };
      } catch (error) {
        console.error('Error fetching article:', error);
        throw error;
      }
    }

    // ä½¿ç”¨å®˜æ–¹å‡½å¼åº«æ¸²æŸ“å¯Œæ–‡æœ¬ï¼ˆæ”¯æ´åµŒå…¥è³‡ç”¢èˆ‡è¶…é€£çµï¼‰
    function renderRichText(richText, assetMap) {
      if (!richText || !richText.content) return '<p>å…§å®¹è¼‰å…¥ä¸­...</p>';
      const renderer = (typeof window.documentToHtmlString === 'function')
        ? window.documentToHtmlString
        : (window.contentfulRichTextHtmlRenderer && typeof window.contentfulRichTextHtmlRenderer.documentToHtmlString === 'function'
            ? window.contentfulRichTextHtmlRenderer.documentToHtmlString
            : null);
      if (!renderer) {
        console.error('Contentful renderer æœªè¼‰å…¥');
        return '<p>å…§å®¹è¼‰å…¥ä¸­...</p>';
      }
      return renderer(richText, {
        // ä¿ç•™å…§å®¹ä¸­çš„æ›è¡Œï¼ˆContentful æ®µå…§æ›è¡Œï¼‰
        renderText: (text) => text.replace(/\n/g, '<br/>'),
        // ç¢ºä¿æ¨™è¨˜é¡å‹å‘ˆç¾ï¼ˆç‰¹åˆ¥æ˜¯åº•ç·šï¼‰
        renderMark: {
          underline: (text) => `<u>${text}</u>`,
        },
        renderNode: {
          'embedded-asset-block': (node) => {
            const asset = assetMap.get(node?.data?.target?.sys?.id);
            if (asset?.fields?.file?.url) {
              const imageUrl = `https:${asset.fields.file.url}`;
              const altText = asset.fields.description || asset.fields.title || 'åµŒå…¥å¼åœ–ç‰‡';
              return `<figure class="my-8"><img src="${imageUrl}" alt="${altText}" class="w-full rounded-lg shadow-md" /></figure>`;
            }
            return '';
          },
          'embedded-asset-inline': (node) => {
            const asset = assetMap.get(node?.data?.target?.sys?.id);
            if (asset?.fields?.file?.url) {
              const imageUrl = `https:${asset.fields.file.url}`;
              const altText = asset.fields.description || asset.fields.title || 'åœ–ç‰‡';
              return `<img src="${imageUrl}" alt="${altText}" class="inline-block align-middle max-w-full h-auto" />`;
            }
            return '';
          },
          blockquote: (node, next) => `<blockquote>${next(node.content)}</blockquote>`,
          hr: () => '<hr/>',
          'hyperlink': (node, next) => {
            const url = node?.data?.uri || '#';
            const text = next(node.content);
            return `<a href="${url}" target="_blank" rel="noopener noreferrer">${text}</a>`;
          }
        }
      });
    }

    // æ¸²æŸ“æ–‡ç« å…§å®¹
    function renderArticle(article, assetMap) {
      const fields = article.fields;
      let heroImage = '';
      let imageUrl = null;
      if (fields.featuredImage?.sys?.id) {
        const asset = assetMap.get(fields.featuredImage.sys.id);
        if (asset?.fields?.file?.url) imageUrl = `https:${asset.fields.file.url}`;
      }
      if (imageUrl) {
        heroImage = `
          <div class="mb-8">
            <img src="${imageUrl}" alt="${fields.title || 'æ–‡ç« ç‰¹è‰²åœ–ç‰‡'}" class="w-full h-64 md:h-96 object-cover rounded-2xl shadow-lg" />
          </div>
        `;
      }
      const publishDate = fields.publishDate ? new Date(fields.publishDate).toLocaleDateString('zh-TW', { year: 'numeric', month: 'long', day: 'numeric' }) : 'è¿‘æœŸ';
      const category = fields.category || fields.tags?.[0] || 'æœªåˆ†é¡';
      const richTextDocument = fields.body || fields.content;
      const content = renderRichText(richTextDocument, assetMap);
      return `
        <article>
          ${heroImage}
          <header class="mb-8">
            <div class="flex items-center gap-3 text-sm text-zinc-500 mb-4">
              <span class="px-3 py-1 bg-zinc-100 rounded-full">${category}</span>
              <span>â€¢</span>
              <span>${publishDate}</span>
            </div>
            <h1 class="text-3xl md:text-4xl font-bold text-zinc-900 mb-4">${fields.title || 'ç„¡æ¨™é¡Œ'}</h1>
            ${fields.excerpt ? `<p class="text-lg text-zinc-600 leading-relaxed">${fields.excerpt}</p>` : ''}
          </header>
          <div class="article-content prose prose-lg max-w-none">${content}</div>
        </article>
      `;
    }

    // è¼‰å…¥æ–‡ç« 
    async function loadArticle() {
      const articleId = getArticleId();
      const loadingState = document.getElementById('loading-state');
      const errorState = document.getElementById('error-state');
      const articleContainer = document.getElementById('article-container');
      if (!articleId) {
        loadingState.classList.add('hidden');
        errorState.classList.remove('hidden');
        errorState.querySelector('p:last-of-type').textContent = 'éŒ¯èª¤è©³æƒ…: ç¼ºå°‘æ–‡ç«  ID åƒæ•¸';
        return;
      }
      try {
        loadingState.classList.remove('hidden');
        errorState.classList.add('hidden');
        articleContainer.classList.add('hidden');
        const result = await fetchArticle(articleId);
        if (!result.article) throw new Error(`æ‰¾ä¸åˆ° ID ç‚º "${articleId}" çš„æ–‡ç« ã€‚å¯èƒ½çš„åŸå› ï¼š1) æ–‡ç« å°šæœªç™¼å¸ƒ 2) æ–‡ç« å·²è¢«åˆªé™¤ 3) ID æ ¼å¼ä¸æ­£ç¢º`);
        const assets = result.includes?.Asset || [];
        const assetMap = new Map(assets.map(asset => [asset.sys?.id, asset]));
        loadingState.classList.add('hidden');
        const articleHTML = renderArticle(result.article, assetMap);
        articleContainer.innerHTML = articleHTML;
        articleContainer.classList.remove('hidden');
        const title = result.article.fields.title || 'æ–‡ç« è©³æƒ…';
        document.title = `${title} Â· æµèŠ¯è¦–è¦º`;
      } catch (error) {
        console.error('Error loading article:', error);
        loadingState.classList.add('hidden');
        errorState.classList.remove('hidden');
        errorState.querySelector('p:last-of-type').textContent = `éŒ¯èª¤è©³æƒ…: ${error.message}`;
      }
    }
    document.addEventListener('DOMContentLoaded', function() { loadArticle(); });
  </script>
  
  <link rel="stylesheet" href="css/style.css">
  <style>
    .article-content {
      color: #374151;
      line-height: 1.75;
    }
    .article-content p,
    .article-content ul,
    .article-content ol,
    .article-content blockquote {
      margin-top: 1.25em;
      margin-bottom: 1.25em;
    }
    .article-content h1,
    .article-content h2,
    .article-content h3,
    .article-content h4 {
      color: #111827;
      font-weight: 600;
      line-height: 1.3;
      margin-top: 1.6em;
      margin-bottom: 0.6em;
    }
    .article-content h1 { font-size: 2.25rem; }
    .article-content h2 { font-size: 1.875rem; }
    .article-content h3 { font-size: 1.5rem; }
    .article-content h4 { font-size: 1.25rem; }
    .article-content ul { list-style-type: disc; padding-left: 1.5em; }
    .article-content ol { list-style-type: decimal; padding-left: 1.5em; }
    .article-content li > p { margin-top: 0.5em; margin-bottom: 0.5em; }
    .article-content a { color: #193a55; text-decoration: underline; font-weight: 500; }
    .article-content a:hover { color: #0d1a2a; }
    .article-content strong { color: #111827; font-weight: 600; }
    .article-content blockquote { font-style: italic; color: #4b5563; border-left: 4px solid #d1d5db; padding-left: 1em; }
    .article-content img { width: 100%; border-radius: 0.5rem; box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1); margin-top: 2em; margin-bottom: 2em; }
  </style>
</head>
<body id="top" class="min-h-screen bg-white text-zinc-800 selection:bg-[#193a55]/30">
  <!-- NAV -->
  <header class="sticky top-0 z-40 border-b border-black/5 bg-white/70 backdrop-blur">
    <div class="mx-auto flex max-w-7xl items-center justify-between px-4 py-4">
      <a href="index.html#top" class="group inline-flex items-center gap-3 transition-all duration-300 hover:scale-105">
        <div class="h-8 w-8 rounded-sm shadow-[0_0_30px_rgba(25,58,85,.35)] transition-all duration-300 group-hover:shadow-[0_0_40px_rgba(25,58,85,.5)]" style="background:linear-gradient(135deg, rgba(25,58,85,1) 0%, rgba(13,29,43,1) 100%)"></div>
        <span class="font-semibold tracking-wide text-zinc-800 transition-colors duration-300 group-hover:text-[#193a55]">æµèŠ¯è¦–è¦º</span>
      </a>
      <nav class="hidden gap-8 md:flex">
        <a href="index.html#showreel" class="nav-link text-sm text-zinc-600 hover:text-zinc-800 relative overflow-hidden transition-all duration-300">
          <span class="relative z-10">ç²¾é¸ä½œå“é›†</span>
          <span class="nav-underline"></span>
        </a>
        <a href="index.html#advantages" class="nav-link text-sm text-zinc-600 hover:text-zinc-800 relative overflow-hidden transition-all duration-300">
          <span class="relative z-10">é—œæ–¼æˆ‘å€‘</span>
          <span class="nav-underline"></span>
        </a>
        <a href="index.html#cases" class="nav-link text-sm text-zinc-600 hover:text-zinc-800 relative overflow-hidden transition-all duration-300">
          <span class="relative z-10">AIæ‡‰ç”¨é …ç›®</span>
          <span class="nav-underline"></span>
        </a>
        <a href="index.html#process" class="nav-link text-sm text-zinc-600 hover:text-zinc-800 relative overflow-hidden transition-all duration-300">
          <span class="relative z-10">æœå‹™æµç¨‹</span>
          <span class="nav-underline"></span>
        </a>
        <a href="faq.html" class="nav-link text-sm text-zinc-600 hover:text-zinc-800 relative overflow-hidden transition-all duration-300">
          <span class="relative z-10">å¸¸è¦‹å•é¡Œ</span>
          <span class="nav-underline"></span>
        </a>
        <a href="blog.html" class="nav-link active text-sm text-zinc-800 relative overflow-hidden transition-all duration-300">
          <span class="relative z-10">æ–‡ç« å°ˆæ¬„</span>
          <span class="nav-underline"></span>
        </a>
      </nav>
      <a href="index.html#contact" class="hidden rounded-full px-4 py-2 text-sm font-semibold md:inline-flex hover:shadow-[0_0_30px_rgba(25,58,85,.5)] hover:-translate-y-0.5 transition-all duration-200 active:scale-95" style="background-color:#193a55;color:white">é ç´„è«®è©¢</a>
    </div>
  </header>

  <!-- Mobile Navigation Bar -->
  <div class="md:hidden mobile-nav-container">
    <!-- Mobile Header with Burger Menu -->
    <div class="mobile-header">
      <div class="burger-container" onclick="toggleMobileMenu()">
        <div id="burger">
          <div class="bar topBar"></div>
          <div class="bar btmBar"></div>
        </div>
      </div>
      
      <div class="mobile-logo">
        <span class="font-semibold tracking-wide text-white">æµèŠ¯è¦–è¦º</span>
      </div>
      
      <div class="mobile-cta">
        <a href="index.html#contact" class="mobile-cta-btn">è«®è©¢</a>
      </div>
    </div>
    
    <!-- Mobile Menu Overlay -->
    <div class="mobile-menu-overlay" id="mobileMenuOverlay">
      <!-- Close button (X) -->
      <button class="mobile-menu-close" onclick="closeMobileMenu()" aria-label="é—œé–‰é¸å–®">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
      
      <ul class="mobile-menu">
        <li class="mobile-menu-item">
          <a href="index.html#top">é¦–é </a>
        </li>
        <li class="mobile-menu-item">
          <a href="index.html#showreel">ç²¾é¸ä½œå“é›†</a>
        </li>
        <li class="mobile-menu-item">
          <a href="index.html#advantages">é—œæ–¼æˆ‘å€‘</a>
        </li>
        <li class="mobile-menu-item">
          <a href="index.html#cases">AIæ‡‰ç”¨é …ç›®</a>
        </li>
        <li class="mobile-menu-item">
          <a href="index.html#process">æœå‹™æµç¨‹</a>
        </li>
        <li class="mobile-menu-item">
          <a href="faq.html">å¸¸è¦‹å•é¡Œ</a>
        </li>
        <li class="mobile-menu-item">
          <a href="blog.html">æ–‡ç« å°ˆæ¬„</a>
        </li>
      </ul>
    </div>
  </div>

  <!-- ARTICLE CONTENT -->
  <main class="py-8 md:py-16">
    <div class="mx-auto max-w-4xl px-4">
      <!-- Loading State -->
      <div id="loading-state" class="text-center py-12">
        <div class="inline-flex items-center gap-3 text-zinc-600">
          <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-[#193a55]"></div>
          <span class="text-lg">æ­£åœ¨è¼‰å…¥æ–‡ç« ...</span>
        </div>
      </div>

      <!-- Error State -->
      <div id="error-state" class="hidden text-center py-12">
        <div class="text-zinc-600">
          <svg class="mx-auto h-16 w-16 text-zinc-400 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.34 16.5c-.77.833.192 2.5 1.732 2.5z"></path>
          </svg>
          <p class="text-xl font-medium mb-2">è¼‰å…¥æ–‡ç« æ™‚ç™¼ç”ŸéŒ¯èª¤</p>
          <p class="text-sm mb-4">è«‹æª¢æŸ¥æ‚¨çš„ç¶²è·¯é€£ç·šæˆ–ç¨å¾Œå†è©¦</p>
          <button onclick="loadArticle()" class="inline-flex items-center justify-center rounded-full border border-black/20 px-6 py-2 text-sm font-medium hover:border-black/40 hover:bg-black/5 transition-all duration-200 text-zinc-800">
            é‡æ–°è¼‰å…¥
          </button>
        </div>
      </div>

      <!-- Article Container -->
      <div id="article-container" class="hidden">
        <!-- Article will be loaded here -->
      </div>

      <!-- Back to Blog Button -->
      <div class="mt-12 text-center">
        <a href="blog.html" class="inline-flex items-center gap-2 text-sm font-medium text-[#193a55] hover:text-[#0d1a2a] hover:underline transition-all duration-200">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
          </svg>
          è¿”å›æ–‡ç« åˆ—è¡¨
        </a>
      </div>
    </div>
  </main>

  <!-- FOOTER -->
  <footer class="border-t border-black/5 py-10">
    <div class="mx-auto flex max-w-7xl flex-col items-center justify-between gap-6 px-4 text-sm text-zinc-600 md:flex-row">
      <p>LYQD Media Â· é›»å½±ç´š AI è£½ä½œ</p>
      <div class="flex items-center gap-6">
        <a href="index.html#showreel" class="hover:text-zinc-800">ç²¾é¸ä½œå“é›†</a>
        <a href="index.html#cases" class="hover:text-zinc-800">AIæ‡‰ç”¨é …ç›®</a>
        <a href="index.html#contact" class="hover:text-zinc-800">è¯çµ¡æˆ‘å€‘</a>
        <a href="blog.html" class="hover:text-zinc-800">æ–‡ç« å°ˆæ¬„</a>
      </div>
    </div>
  </footer>

  <!-- Sticky CTA Buttons -->
  <div class="sticky-cta">
    <!-- å–å¾—å ±åƒ¹æŒ‰éˆ• -->
    <button class="sticky-cta-button primary" onclick="openMiniContact()" title="å–å¾—å ±åƒ¹">
      ğŸ’°
      <span class="tooltip">å–å¾—å ±åƒ¹</span>
    </button>
    
    <!-- LINE å®˜æ–¹å¸³è™ŸæŒ‰éˆ• -->
    <a href="https://lin.ee/0eBvgAV" target="_blank" class="sticky-cta-button secondary" title="LINE å®˜æ–¹å¸³è™Ÿ">
      ğŸ’¬
      <span class="tooltip">LINE å®˜æ–¹å¸³è™Ÿ</span>
    </a>
  </div>

  <!-- Mini Contact Form Modal -->
  <div id="miniContactModal" class="mini-contact-modal">
    <div class="mini-contact-content">
      <button class="mini-contact-close" onclick="closeMiniContact()">&times;</button>
      
      <div class="mini-contact-header">
        <h3>å–å¾—å ±åƒ¹</h3>
        <p>ç•™ä¸‹è³‡è¨Šï¼Œæˆ‘å€‘å°‡åœ¨ 24 å°æ™‚å…§å›è¦†</p>
      </div>
      
      <form class="mini-contact-form" action="https://formspree.io/f/mdkdqdqp" method="POST" enctype="text/plain">
        <input type="text" name="Name" placeholder="æ‚¨çš„å§“å" required>
        <input type="email" name="Email" placeholder="æ‚¨çš„ Email" required>
        <textarea name="Message" placeholder="ç°¡è¿°æ‚¨çš„å°ˆæ¡ˆå…§å®¹ã€æ™‚ç¨‹èˆ‡é ç®—å€é–“" required></textarea>
        
        <div class="mini-contact-actions">
          <button type="submit" class="submit-btn">é€å‡º</button>
          <button type="button" class="cancel-btn" onclick="closeMiniContact()">å–æ¶ˆ</button>
        </div>
      </form>
    </div>
  </div>

  <script>


    // å¾ URL åƒæ•¸ç²å–æ–‡ç«  ID
    function getArticleId() {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get('id');
    }



    // ç²å–æ–‡ç« å…§å®¹
    async function fetchArticle(articleId) {
      try {
        const apiUrl = contentfulProxyUrl({ sys: { id: articleId }, include: '1' });
        // ä¸Šä¸€è¡Œ URLSearchParams ä¸èƒ½è™•ç†ç‰©ä»¶æ·±å±¤ï¼›æ”¹ç‚ºæ˜ç¢º queryï¼š
        const apiUrlFixed = contentfulProxyUrl({
          'sys.id': articleId,
          include: '1'
        });
        console.log(`Fetching article from: ${apiUrlFixed}`);
        
        const response = await fetch(apiUrlFixed);

        if (!response.ok) {
          throw new Error(`HTTP error! status: ${response.status}`);
        }

        const data = await response.json();
        console.log(`Contentful API response for article ${articleId}:`, data);
        
        return {
          article: data.items?.[0] || null,
          includes: data.includes || {}
        };
      } catch (error) {
        console.error('Error fetching article:', error);
        throw error;
      }
    }

    // æ¸²æŸ“æ–‡ç« å…§å®¹
    function renderArticle(article, assetMap) {
      const fields = article.fields;
      
      // è™•ç†ç‰¹è‰²åœ–ç‰‡ - ä½¿ç”¨ Asset Map æ¨¡å¼
      let heroImage = '';
      
      // èª¿è©¦ï¼šè¨˜éŒ„åœ–ç‰‡ç›¸é—œæ¬„ä½
      console.log(`Processing images for article "${fields.title || 'ç„¡æ¨™é¡Œ'}"`);
      console.log('Image fields:', {
        featuredImage: fields.featuredImage,
        image: fields.image,
        heroImage: fields.heroImage,
        thumbnail: fields.thumbnail
      });
      
      // ä½¿ç”¨ Asset Map æŸ¥æ‰¾åœ–ç‰‡è³‡æº
      let imageUrl = null;
      if (fields.featuredImage && fields.featuredImage.sys && fields.featuredImage.sys.id) {
        const assetId = fields.featuredImage.sys.id;
        const asset = assetMap.get(assetId);
        
        if (asset && asset.fields && asset.fields.file && asset.fields.file.url) {
          imageUrl = `https:${asset.fields.file.url}`;
          console.log(`âœ… å¾ Asset Map æ‰¾åˆ°åœ–ç‰‡: ${imageUrl}`);
        } else {
          console.log(`âš ï¸ Asset Map ä¸­æœªæ‰¾åˆ° ID ç‚º ${assetId} çš„åœ–ç‰‡è³‡æº`);
        }
      } else {
        console.log(`âš ï¸ æ–‡ç« ä¸­æœªæ‰¾åˆ° featuredImage çš„ sys.id`);
      }
      
      if (imageUrl) {
        heroImage = `
          <div class="mb-8">
            <img src="${imageUrl}" alt="${fields.title || 'æ–‡ç« ç‰¹è‰²åœ–ç‰‡'}" class="w-full h-64 md:h-96 object-cover rounded-2xl shadow-lg" onerror="console.error('åœ–ç‰‡è¼‰å…¥å¤±æ•—:', this.src); this.style.display='none';" onload="console.log('åœ–ç‰‡è¼‰å…¥æˆåŠŸ:', this.src);" />
          </div>
        `;
      }

      // è™•ç†ç™¼å¸ƒæ—¥æœŸ
      const publishDate = fields.publishDate ? new Date(fields.publishDate).toLocaleDateString('zh-TW', {
        year: 'numeric',
        month: 'long',
        day: 'numeric'
      }) : 'è¿‘æœŸ';

      // è™•ç†åˆ†é¡
      const category = fields.category || fields.tags?.[0] || 'æœªåˆ†é¡';

      // è™•ç†æ–‡ç« å…§å®¹
      let content = '<p>æ–‡ç« å…§å®¹è¼‰å…¥ä¸­...</p>';
      if (fields.content && fields.content.content) {
        content = renderRichText(fields.content);
      } else if (fields.body) {
        content = renderRichText(fields.body);
      }

      return `
        <article>
          ${heroImage}
          
          <header class="mb-8">
            <div class="flex items-center gap-3 text-sm text-zinc-500 mb-4">
              <span class="px-3 py-1 bg-zinc-100 rounded-full">${category}</span>
              <span>â€¢</span>
              <span>${publishDate}</span>
            </div>
            <h1 class="text-3xl md:text-4xl font-bold text-zinc-900 mb-4">${fields.title || 'ç„¡æ¨™é¡Œ'}</h1>
            ${fields.excerpt ? `<p class="text-lg text-zinc-600 leading-relaxed">${fields.excerpt}</p>` : ''}
          </header>

          <div class="article-content prose prose-lg max-w-none">
            ${content}
          </div>
        </article>
      `;
    }

    // æ¸²æŸ“å¯Œæ–‡æœ¬å…§å®¹
    function renderRichText(richText) {
      if (!richText || !richText.content) return '<p>å…§å®¹è¼‰å…¥ä¸­...</p>';

      let html = '';
      
      richText.content.forEach(node => {
        if (node.nodeType === 'paragraph') {
          html += '<p>';
          if (node.content) {
            node.content.forEach(textNode => {
              let text = textNode.value || '';
              if (textNode.marks) {
                textNode.marks.forEach(mark => {
                  if (mark.type === 'bold') {
                    text = `<strong>${text}</strong>`;
                  } else if (mark.type === 'italic') {
                    text = `<em>${text}</em>`;
                  } else if (mark.type === 'underline') {
                    text = `<u>${text}</u>`;
                  }
                });
              }
              html += text;
            });
          }
          html += '</p>';
        } else if (node.nodeType === 'heading-1') {
          html += `<h1>${node.content?.[0]?.value || ''}</h1>`;
        } else if (node.nodeType === 'heading-2') {
          html += `<h2>${node.content?.[0]?.value || ''}</h2>`;
        } else if (node.nodeType === 'heading-3') {
          html += `<h3>${node.content?.[0]?.value || ''}</h3>`;
        } else if (node.nodeType === 'unordered-list') {
          html += '<ul>';
          if (node.content) {
            node.content.forEach(listItem => {
              html += `<li>${listItem.content?.[0]?.content?.[0]?.value || ''}</li>`;
            });
          }
          html += '</ul>';
        } else if (node.nodeType === 'ordered-list') {
          html += '<ol>';
          if (node.content) {
            node.content.forEach(listItem => {
              html += `<li>${listItem.content?.[0]?.content?.[0]?.value || ''}</li>`;
            });
          }
          html += '</ol>';
        }
      });

      return html || '<p>å…§å®¹è¼‰å…¥ä¸­...</p>';
    }

    // è¼‰å…¥æ–‡ç« 
    async function loadArticle() {
      const articleId = getArticleId();
      const loadingState = document.getElementById('loading-state');
      const errorState = document.getElementById('error-state');
      const articleContainer = document.getElementById('article-container');
      
      // èª¿è©¦ä¿¡æ¯ï¼šè¨˜éŒ„å¾ URL ç²å–çš„æ–‡ç«  ID
      console.log(`Attempting to load article with ID: "${articleId}"`);
      console.log(`Current URL: ${window.location.href}`);

      if (!articleId) {
        // æ²’æœ‰æ–‡ç«  IDï¼Œé¡¯ç¤ºéŒ¯èª¤
        loadingState.classList.add('hidden');
        errorState.classList.remove('hidden');
        errorState.querySelector('p:last-of-type').textContent = 'éŒ¯èª¤è©³æƒ…: ç¼ºå°‘æ–‡ç«  ID åƒæ•¸';
        return;
      }

      try {
        // é¡¯ç¤ºè¼‰å…¥ç‹€æ…‹
        loadingState.classList.remove('hidden');
        errorState.classList.add('hidden');
        articleContainer.classList.add('hidden');

        // ç²å–æ–‡ç« 
        const result = await fetchArticle(articleId);

        if (!result.article) {
          throw new Error(`æ‰¾ä¸åˆ° ID ç‚º "${articleId}" çš„æ–‡ç« ã€‚å¯èƒ½çš„åŸå› ï¼š1) æ–‡ç« å°šæœªç™¼å¸ƒ 2) æ–‡ç« å·²è¢«åˆªé™¤ 3) ID æ ¼å¼ä¸æ­£ç¢º`);
        }

        // å»ºç«‹ Asset Map ä»¥ä¾¿å¿«é€ŸæŸ¥æ‰¾åœ–ç‰‡è³‡æº
        const assets = result.includes?.Asset || [];
        const assetMap = new Map();
        
        assets.forEach(asset => {
          if (asset.sys && asset.sys.id) {
            assetMap.set(asset.sys.id, asset);
          }
        });
        
        console.log(`å»ºç«‹ Asset Mapï¼ŒåŒ…å« ${assetMap.size} å€‹åœ–ç‰‡è³‡æº`);

        // éš±è—è¼‰å…¥ç‹€æ…‹
        loadingState.classList.add('hidden');

        // æ¸²æŸ“æ–‡ç« ï¼Œå‚³é assetMap åƒæ•¸
        const articleHTML = renderArticle(result.article, assetMap);
        articleContainer.innerHTML = articleHTML;
        articleContainer.classList.remove('hidden');

        // æ›´æ–°é é¢æ¨™é¡Œ
        const title = result.article.fields.title || 'æ–‡ç« è©³æƒ…';
        document.title = `${title} Â· æµèŠ¯è¦–è¦º`;

      } catch (error) {
        console.error('Error loading article:', error);
        
        // éš±è—è¼‰å…¥ç‹€æ…‹
        loadingState.classList.add('hidden');
        
        // é¡¯ç¤ºéŒ¯èª¤ç‹€æ…‹
        errorState.classList.remove('hidden');
        errorState.querySelector('p:last-of-type').textContent = `éŒ¯èª¤è©³æƒ…: ${error.message}`;
      }
    }



    // é é¢è¼‰å…¥å®Œæˆå¾Œè‡ªå‹•è¼‰å…¥æ–‡ç« 
    document.addEventListener('DOMContentLoaded', function() {
      loadArticle();
    });
  </script>

  <!-- å¼•å…¥å…±ç”¨ JavaScript åŠŸèƒ½ -->
  <script src="js/main.js"></script>
</body>
</html>
